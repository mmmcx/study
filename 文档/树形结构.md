

```java
/**   
* @Package com.app.open.common.tree 
*/
package com.xxx.common.utils;

import java.util.List;


/** 
 * <p>Description: 树节点接口</p>
 * 实现了这个接口的对象可以直接转化成json data给前端的js框架处理
 * @version V1.0
 */
public interface TreeNode<T> {
	public String getId();

	public String getParentId();

	public List<T> getChildren();

	public void setChildren(List<T> children);

	int getLevelSize();

	void setLevelSize(int levelSize);
}

```



```java
/**
* @Package com.app.open.common.tree
*/
package com.xxx.common.utils;

import java.util.List;
import java.util.Map;

/**
 *
 * @ClassName. BaseStaticTreeNode
 * @Description. 树基本节点，后面可以扩充
 * @author liuchen
 * @version V1.0
 */
public class BaseTreeNode implements TreeNode<BaseTreeNode>{
	private String id;

	private String parentId;

	private String label;

	private Boolean disabled;

	private List<BaseTreeNode> children;

	private String type;

	/**图标*/
	private String icon;

	private Object data;

	private Map<String,Object> extra;

	@Override
	public String getId() {
		return id;
	}

	public void setId(String id) {
		this.id = id;
	}

	@Override
	public String getParentId() {
		return parentId;
	}

	public void setParentId(String parentId) {
		this.parentId = parentId;
	}

	public String getLabel() {
		return label;
	}

	public void setLabel(String label) {
		this.label = label;
	}

	@Override
    public List<BaseTreeNode> getChildren() {
		return children;
	}

	@Override
	public void setChildren(List<BaseTreeNode> children) {
		this.children = children;
	}

	public Boolean getDisabled() {
		return disabled;
	}

	public void setDisabled(Boolean disabled) {
		this.disabled = disabled;
	}

	public String getType() {
		return type;
	}

	public void setType(String type) {
		this.type = type;
	}

	@Override
	public int getLevelSize() {
		return 0;
	}

	@Override
	public void setLevelSize(int levelSize) {

	}

	public Object getData() {
		return data;
	}

	public void setData(Object data) {
		this.data = data;
	}

	public String getIcon() {
		return icon;
	}

	public void setIcon(String icon) {
		this.icon = icon;
	}

	public Map<String, Object> getExtra() {
		return extra;
	}

	public void setExtra(Map<String, Object> extra) {
		this.extra = extra;
	}
}
```



```java
package com.xxx.common.utils;

import cn.hutool.core.collection.CollUtil;
import com.google.common.collect.Lists;
import com.google.common.collect.Maps;

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;
import java.util.Map;

public class TreeUtil {
    //获取顶层节点
    public static <T extends TreeNode<T>> List<T> getTreeList(String topId, List<T> entityList) {
        if (CollUtil.isEmpty(entityList)) {
            return Collections.emptyList();
        }
        //存储顶层的数据
        List<T> resultList = Lists.newArrayList();

        Map<Object, T> treeMap = Maps.newHashMap();
        T itemTree;

        for (T value : entityList) {
            itemTree = value;
            //把所有的数据放到map当中，id为key
            treeMap.put(itemTree.getId(), itemTree);
            //把顶层数据放到集合中
            if (topId.equals(itemTree.getId()) || itemTree.getId() == null) {
                resultList.add(itemTree);
            }
        }

        renderTree(entityList, treeMap);
        return resultList;
    }

    //获取顶层节点
    public static <T extends TreeNode<T>> List<T> getTreeListByParentId(String topId, List<T> entityList) {
        if (CollUtil.isEmpty(entityList)) {
            return Collections.emptyList();
        }
        //存储顶层的数据
        List<T> resultList = Lists.newArrayList();

        Map<Object, T> treeMap = Maps.newHashMap();
        T itemTree;

        for (T value : entityList) {
            itemTree = value;
            //把所有的数据放到map当中，id为key
            treeMap.put(itemTree.getId(), itemTree);
            //把顶层数据放到集合中
            if (topId.equals(itemTree.getParentId()) || itemTree.getParentId() == null) {
                resultList.add(itemTree);
            }
        }

        renderTree(entityList, treeMap);
        return resultList;
    }

    private static <T extends TreeNode<T>> void renderTree(List<T> entityList, Map<Object, T> treeMap) {
        T itemTree;
        //循环数据，把数据放到上一级的children属性中
        for (T t : entityList) {
            itemTree = t;
            //在map集合中寻找父亲
            T parentNode = treeMap.get(itemTree.getParentId());
            if (parentNode != null) {
                //判断父亲有没有
                if (parentNode.getChildren() == null) {
                    parentNode.setChildren(new ArrayList<>());
                }
                //把子节点 放到父节点childList当中
                parentNode.getChildren().add(itemTree);
                //把放好的数据放回map当中
                treeMap.put(itemTree.getParentId(), parentNode);
            }
        }
    }
}

```

